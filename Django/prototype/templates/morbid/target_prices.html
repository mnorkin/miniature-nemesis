<ul class="">
  {% for target in target_prices  %}
  <li class="entry chart">
    <a class="ticket" href="{{ target.ticker.get_absolute_url }}">{{ target.ticker }}</a>
    <a class="analytic" href="{{ target.analytic.get_absolute_url }}">{{ target.analytic }}</a>
    <span class="price">{{ target.price }}</span>

    <span id="{{ target.analytic.slug}}_{{ target.ticker.slug }}" class="circle {% if target.change < 0 %}down{% elif target.change > 0 %}up{% endif %}">
      <strong>{{ target.change|floatformat:1|cut:"-" }}%</strong>
    </span>

    <script type="text/javascript">
    generate_pie( "{{ target.analytic.slug}}_{{ target.ticker.slug }}", "{{ target.change }}" )
    </script>

    <ul class="bar">
      {% for fap in target.fap %}
      <li id="{{ fap.feature.slug }}_{{ fap.analytic.slug }}_{{ fap.ticker.slug }}" class="feature"><span>{{fap.feature.name}}</span></li>
      <script type="text/javascript">
      generate_grid_element( "{{ fap.feature.slug }}_{{ fap.analytic.slug }}_{{ fap.ticker.slug }}", "{{ fap.value }}", "{{fap.feature.name}}" )
      </script>
      {% endfor %}
    </ul>
    <div class="bar_tooltip"></div>
  </li>

  {% endfor %}
  <br class="clear"/>
</ul>